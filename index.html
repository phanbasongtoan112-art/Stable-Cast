<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StableCast | Crypto AI Prediction</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg: #0b0e11;
            --card: #181d23;
            --text: #e0e6ed;
            --green: #0ecb81;
            --red: #f6465d;
            --blue: #3b82f6;
        }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); padding: 20px; text-align: center; }
        .container { max-width: 800px; margin: 0 auto; }
        
        /* Header */
        h1 { margin-bottom: 5px; color: var(--blue); letter-spacing: 1px; }
        .subtitle { color: #848e9c; font-size: 0.9em; margin-bottom: 30px; }

        /* Price Card */
        .price-card {
            background: var(--card);
            padding: 20px;
            border-radius: 12px;
            display: inline-block;
            min-width: 250px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            margin-bottom: 20px;
            border: 1px solid #2b3139;
        }
        .symbol { font-size: 1.2em; color: #848e9c; }
        .price { font-size: 2.5em; font-weight: bold; margin: 10px 0; }
        .prediction-box { margin-top: 15px; padding-top: 15px; border-top: 1px solid #2b3139; }
        .pred-label { font-size: 0.9em; color: #848e9c; }
        .pred-value { font-size: 1.4em; color: var(--blue); font-weight: bold; }

        /* Chart */
        .chart-container {
            background: var(--card);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 1px solid #2b3139;
        }
        
        .footer { margin-top: 30px; font-size: 0.8em; color: #5e6673; }
    </style>
</head>
<body>

    <div class="container">
        <h1>STABLE CAST AI</h1>
        <div class="subtitle">Hệ thống dự đoán giá Crypto sử dụng mô hình LSTM</div>

        <div class="price-card">
            <div class="symbol">Bitcoin (BTC/USDT)</div>
            <div class="price" id="currentPrice">Loading...</div>
            
            <div class="prediction-box">
                <div class="pred-label">Dự đoán AI (1h tới)</div>
                <div class="pred-value">↗️ <span id="predPrice">Calculating...</span></div>
            </div>
        </div>

        <div class="chart-container">
            <canvas id="cryptoChart"></canvas>
        </div>

        <div class="footer">
            Developed by <b>Phan Ba Song Toan</b> (FPT University) <br>
            Powered by Binance API & Custom LSTM Model
        </div>
    </div>

    <script>
        // 1. Lấy giá thật từ Binance (Không cần API Key)
        async function fetchPrice() {
            try {
                const response = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT');
                const data = await response.json();
                const price = parseFloat(data.price).toFixed(2);
                
                // Hiển thị giá hiện tại
                document.getElementById('currentPrice').innerText = `$${price}`;
                document.getElementById('currentPrice').style.color = '#0ecb81'; // Màu xanh sàn Binance

                // Giả lập dự đoán của AI (Lấy giá hiện tại + random nhỏ)
                // *Lưu ý: Sau này bạn sẽ thay chỗ này bằng API gọi model Python của bạn*
                let fakePrediction = (parseFloat(price) + (Math.random() * 50 - 20)).toFixed(2);
                document.getElementById('predPrice').innerText = `$${fakePrediction}`;
            } catch (error) {
                console.error('Lỗi lấy giá:', error);
            }
        }

        // Gọi hàm lấy giá ngay lập tức và lặp lại mỗi 3 giây
        fetchPrice();
        setInterval(fetchPrice, 3000);

        // 2. Vẽ biểu đồ (Chart.js)
        const ctx = document.getElementById('cryptoChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['10:00', '10:05', '10:10', '10:15', '10:20', '10:25', 'Next 1h (AI)'],
                datasets: [{
                    label: 'Giá thực tế',
                    data: [96000, 96200, 96100, 96500, 96400, 96600, null], // Dữ liệu giả lập
                    borderColor: '#0ecb81',
                    borderWidth: 2,
                    tension: 0.4
                }, {
                    label: 'AI Dự đoán (LSTM)',
                    data: [null, null, null, null, null, 96600, 97000], // Điểm nối tiếp để dự đoán
                    borderColor: '#3b82f6',
                    borderWidth: 2,
                    borderDash: [5, 5], // Nét đứt
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { labels: { color: 'white' } } },
                scales: {
                    y: { grid: { color: '#2b3139' }, ticks: { color: '#848e9c' } },
                    x: { grid: { display: false }, ticks: { color: '#848e9c' } }
                }
            }
        });
    </script>
</body>
</html>
