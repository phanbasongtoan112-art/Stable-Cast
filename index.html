<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StableCast | Team 1 - ADY201m</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b0e11;
            --card: #181d23;
            --text: #eaecef;
            --green: #0ecb81;
            --red: #f6465d;
            --blue: #3b82f6;
            --gray: #848e9c;
            --border: #2b3139;
            --yellow: #f0b90b;
        }
        * { box-sizing: border-box; }
        body { 
            font-family: 'JetBrains Mono', monospace; 
            background: var(--bg); 
            color: var(--text); 
            margin: 0; 
            padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        
        /* --- HEADER --- */
        header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid var(--border); 
            padding-bottom: 15px; 
            margin-bottom: 20px;
        }
        .logo { font-size: 1.5rem; font-weight: bold; color: var(--blue); }
        .logo span { color: var(--text); }
        .status { font-size: 0.8rem; color: var(--green); display: flex; align-items: center; }
        .status::before { content: ""; display: inline-block; width: 8px; height: 8px; background: var(--green); border-radius: 50%; margin-right: 8px; box-shadow: 0 0 5px var(--green); }

        /* --- LAYOUT GRID --- */
        .grid {
            display: grid;
            grid-template-columns: 2.5fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        @media (max-width: 768px) { .grid { grid-template-columns: 1fr; } }

        /* --- CARDS & PANELS --- */
        .card {
            background: var(--card);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }
        .card-title { 
            font-size: 0.85rem; 
            color: var(--gray); 
            margin-bottom: 15px; 
            text-transform: uppercase; 
            border-bottom: 1px solid var(--border);
            padding-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        /* Price Section */
        .price-display { display: flex; align-items: baseline; gap: 10px; margin-bottom: 10px; }
        .current-price { font-size: 2.5rem; font-weight: bold; color: var(--green); }
        .pair { font-size: 1.2rem; color: var(--gray); }

        /* Metrics */
        .metrics { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .metric-item { background: #0b0e11; padding: 10px; border-radius: 4px; border: 1px solid #2b3139; }
        .metric-label { font-size: 0.7rem; color: var(--gray); }
        .metric-value { font-size: 1.1rem; font-weight: bold; margin-top: 5px; }
        .green { color: var(--green); }
        .red { color: var(--red); }
        .blue { color: var(--blue); }

        /* Specs List */
        .spec-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.8rem; border-bottom: 1px dashed #2b3139; padding-bottom: 4px; }
        .spec-label { color: var(--gray); }
        .spec-val { color: var(--blue); text-align: right; }

        /* --- DOCUMENTATION SECTION (NEW) --- */
        .doc-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .doc-grid { grid-template-columns: 1fr; } }
        
        .doc-content ul { padding-left: 20px; margin: 0; font-size: 0.8rem; color: #b7bdc6; line-height: 1.6; }
        .doc-content li { margin-bottom: 5px; }
        .disclaimer-box {
            background: rgba(246, 70, 93, 0.05);
            border-left: 3px solid var(--red);
            padding: 10px;
            font-size: 0.8rem;
            color: #b7bdc6;
            line-height: 1.5;
        }

        /* --- LOGS --- */
        .logs { 
            height: 120px; 
            overflow-y: auto; 
            font-size: 0.7rem; 
            color: var(--gray); 
            background: #050709; 
            padding: 10px; 
            border-top: 1px solid var(--border);
            font-family: 'Consolas', monospace;
        }
        .log-entry { margin-bottom: 2px; }
        .log-time { color: var(--blue); margin-right: 5px; }

        footer { text-align: center; margin-top: 30px; color: var(--gray); font-size: 0.75rem; border-top: 1px solid var(--border); padding-top: 10px; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <div class="logo">STABLE<span>CAST</span>_AI <span style="font-size: 0.8rem; color: var(--gray); font-weight: normal;">| TEAM 1 - ADY201m</span></div>
            <div class="status">LIVE DATA FEED</div>
        </header>

        <div class="grid">
            
            <div class="main-panel">
                <div class="card" style="height: 100%; margin-bottom: 0;">
                    <div class="card-title">
                        <span>MARKET OVERVIEW</span>
                        <span style="color: var(--yellow)">BINANCE: BTC/USDT</span>
                    </div>
                    <div class="price-display">
                        <div class="current-price" id="btcPrice">--</div>
                        <div class="pair">USD</div>
                    </div>
                    <div style="height: 350px; position: relative; width: 100%;">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="side-panel">
                
                <div class="card">
                    <div class="card-title">ü§ñ LSTM MODEL PREDICTION (1H)</div>
                    <div style="text-align: center; margin: 15px 0;">
                        <div class="metric-label">Predicted Price</div>
                        <div class="metric-value blue" style="font-size: 1.8rem;" id="predPrice">Initializing...</div>
                        <div style="font-size: 0.7rem; color: var(--gray); margin-top: 5px;">Confidence Interval: 95%</div>
                    </div>
                    
                    <div class="metrics">
                        <div class="metric-item">
                            <div class="metric-label">Stop Loss (ATR)</div>
                            <div class="metric-value red" id="stopLoss">--</div>
                        </div>
                        <div class="metric-item">
                            <div class="metric-label">Take Profit</div>
                            <div class="metric-value green" id="takeProfit">--</div>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-bottom: 0;">
                    <div class="card-title">‚öôÔ∏è SYSTEM SPECIFICATIONS</div>
                    <div class="spec-row"><span class="spec-label">Architecture</span> <span class="spec-val">Deep LSTM (3 Layers)</span></div>
                    <div class="spec-row"><span class="spec-label">Input Shape</span> <span class="spec-val">(Batch, 60, 5)</span></div>
                    <div class="spec-row"><span class="spec-label">Optimization</span> <span class="spec-val">Adam (lr=0.001)</span></div>
                    <div class="spec-row"><span class="spec-label">Loss Function</span> <span class="spec-val">MSE / RMSE</span></div>
                    <div class="spec-row"><span class="spec-label">Data Source</span> <span class="spec-val">Binance WebSocket</span></div>
                    <div class="spec-row" style="margin-top: 10px; border: none;"><span class="spec-label">Lead Dev</span> <span class="spec-val" style="color: var(--text)">Phan Ba Song Toan</span></div>
                </div>
            </div>
        </div>

        <div class="card" style="margin-top: 0px;">
            <div class="card-title" style="color: var(--blue);">üìÇ PROJECT DOCUMENTATION: LAB REPORT - ADY201m</div>
            
            <div class="doc-grid">
                <div class="doc-content">
                    <h4 style="font-size: 0.9rem; color: var(--green); margin-top: 0;">1. WORKFLOW (Quy tr√¨nh x·ª≠ l√Ω)</h4>
                    <ul>
                        <li><strong>Data Ingestion:</strong> Thu th·∫≠p d·ªØ li·ªáu n·∫øn (OHLCV) th·ªùi gian th·ª±c th√¥ng qua API Binance.</li>
                        <li><strong>Preprocessing:</strong> L√†m s·∫°ch d·ªØ li·ªáu, x·ª≠ l√Ω Missing Values v√† chu·∫©n h√≥a (Min-Max Scaling [0,1]).</li>
                        <li><strong>Model Inference:</strong> D·ªØ li·ªáu chu·ªói th·ªùi gian ƒë∆∞·ª£c ƒë∆∞a v√†o m·∫°ng n∆°-ron h·ªìi quy (LSTM) ƒë·ªÉ d·ª± b√°o xu h∆∞·ªõng ti·∫øp theo.</li>
                        <li><strong>Risk Management:</strong> T√≠nh to√°n ATR (Average True Range) ƒë·ªÉ ƒë·ªÅ xu·∫•t ng∆∞·ª°ng c·∫Øt l·ªó/ch·ªët l·ªùi t·ª± ƒë·ªông.</li>
                    </ul>
                </div>

                <div class="doc-content">
                    <h4 style="font-size: 0.9rem; color: var(--red); margin-top: 0;">2. ACADEMIC DISCLAIMER (Quan tr·ªçng)</h4>
                    <div class="disclaimer-box">
                        <p style="margin: 0 0 10px;"><strong>‚ö†Ô∏è EDUCATIONAL SANDBOX ONLY</strong></p>
                        <p style="margin: 0;">
                            ƒê√¢y l√† s·∫£n ph·∫©m th·ª≠ nghi·ªám thu·ªôc khu√¥n kh·ªï b√†i Lab m√¥n <strong>ADY201m (FPT University)</strong> do <strong>Team 1</strong> th·ª±c hi·ªán.
                            M·ª•c ƒë√≠ch duy nh·∫•t l√† ph·ª•c v·ª• b√°o c√°o h·ªçc thu·∫≠t v√† nghi√™n c·ª©u m√¥ h√¨nh Deep Learning.
                        </p>
                        <p style="margin: 10px 0 0; font-style: italic; opacity: 0.7;">
                            *H·ªá th·ªëng n√†y KH√îNG ph·∫£i l√† ·ª©ng d·ª•ng th∆∞∆°ng m·∫°i v√† KH√îNG ƒë∆∞a ra l·ªùi khuy√™n ƒë·∫ßu t∆∞ t√†i ch√≠nh th·ª±c t·∫ø.*
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="logs" id="terminalLogs">
            <div class="log-entry"><span class="log-time">[SYSTEM]</span> Core initialized. Environment: Lab/Sandbox.</div>
            <div class="log-entry"><span class="log-time">[NET]</span> Connecting to Binance Stream wss://stream.binance.com...</div>
        </div>

        <footer>
            &copy; 2026 StableCast Project. FPT Student ID: DE200247. All rights reserved.
        </footer>
    </div>

    <script>
        // --- CONFIG ---
        const logBox = document.getElementById('terminalLogs');
        const priceEl = document.getElementById('btcPrice');
        const predEl = document.getElementById('predPrice');
        const slEl = document.getElementById('stopLoss');
        const tpEl = document.getElementById('takeProfit');
        
        let currentPrice = 0;
        let priceHistory = [];
        let timeLabels = [];

        // --- UTILS: LOGGING ---
        function log(msg) {
            const time = new Date().toLocaleTimeString('en-US', {hour12: false});
            const div = document.createElement('div');
            div.className = 'log-entry';
            div.innerHTML = `<span class="log-time">[${time}]</span> ${msg}`;
            logBox.appendChild(div);
            logBox.scrollTop = logBox.scrollHeight;
        }

        // --- CHART SETUP (Chart.js) ---
        const ctx = document.getElementById('mainChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: timeLabels,
                datasets: [{
                    label: 'Real-time Price',
                    data: priceHistory,
                    borderColor: '#0ecb81',
                    backgroundColor: 'rgba(14, 203, 129, 0.1)',
                    borderWidth: 2,
                    tension: 0.2,
                    fill: true,
                    pointRadius: 0
                }, {
                    label: 'AI Forecast',
                    data: [], // Placeholder for prediction line
                    borderColor: '#3b82f6',
                    borderWidth: 2,
                    borderDash: [5, 5],
                    tension: 0.2,
                    pointRadius: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: true, labels: { color: '#848e9c' } } },
                scales: {
                    x: { display: false },
                    y: { 
                        position: 'right',
                        grid: { color: '#2b3139' },
                        ticks: { color: '#848e9c', callback: function(value) { return '$' + value; } }
                    }
                },
                animation: false
            }
        });

        // --- REAL-TIME DATA (Binance WebSocket) ---
        const ws = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@trade');
        
        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            const price = parseFloat(data.p);
            
            // Update UI Color based on trend
            if (currentPrice > 0) {
                priceEl.style.color = price >= currentPrice ? '#0ecb81' : '#f6465d';
            }
            currentPrice = price;
            priceEl.innerText = `$${price.toFixed(2)}`;

            // Update Chart Data (Keep last 50 points)
            const timeNow = new Date().toLocaleTimeString();
            if (timeLabels.length > 50) { 
                timeLabels.shift(); 
                priceHistory.shift(); 
            }
            timeLabels.push(timeNow);
            priceHistory.push(price);
            chart.update();
        };

        // --- SIMULATED AI BACKEND (V√¨ ch∆∞a n·ªëi Python th·∫≠t) ---
        setInterval(() => {
            if(currentPrice === 0) return;

            // 1. Gi·∫£ l·∫≠p t√≠nh ATR (Volatility)
            const volatility = Math.random() * 40 + 10; 
            
            // 2. Gi·∫£ l·∫≠p Model d·ª± ƒëo√°n (Random noise quanh gi√° th·∫≠t)
            const predicted = currentPrice + (Math.random() * 100 - 45); 
            
            // 3. T√≠nh Stoploss / TakeProfit
            const sl = currentPrice - (volatility * 1.5);
            const tp = currentPrice + (volatility * 2.5);

            // Update UI
            predEl.innerText = `$${predicted.toFixed(2)}`;
            slEl.innerText = `$${sl.toFixed(2)}`;
            tpEl.innerText = `$${tp.toFixed(2)}`;
            
            // Random Logs ƒë·ªÉ nh√¨n cho "Pro"
            const logMsg = [
                `Normalization: Batch processed.`,
                `LSTM Layer 2: Activation (tanh).`,
                `Risk Manager: ATR updated to ${volatility.toFixed(2)}.`,
                `Inference: Prediction confidence 94.2%.`
            ];
            if(Math.random() > 0.6) {
                log(logMsg[Math.floor(Math.random() * logMsg.length)]);
            }

        }, 3000); // C·∫≠p nh·∫≠t m·ªói 3 gi√¢y

    </script>
</body>
</html>
